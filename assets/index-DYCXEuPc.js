import{r as l,j as e,R as F}from"./react-BMrMXMSG.js";import{c as I}from"./react-dom-XhyPzpGK.js";import{c as U}from"./zustand-3uy3gfa1.js";import{F as M}from"./@monaco-editor-BrJCHBAK.js";import{c as C,S as B}from"./@radix-ui-8SGmtYo-.js";import{c as H}from"./clsx-B-dksMZM.js";import{t as A}from"./tailwind-merge-BkWO730n.js";import{L as w,G,S as V,a as q,D as j,U as K,b as W,M as J,P as Q,T as X,R as Y}from"./lucide-react-DFK0IKzL.js";import{P as Z,a as _,b as ee}from"./react-resizable-panels-CUcdorkG.js";import{c as te}from"./class-variance-authority-Bb4qSo10.js";import{D as u}from"./vaul-BusDX9t-.js";import"./scheduler-CzFDRTuY.js";import"./use-sync-external-store-CIXbO2Kd.js";import"./state-local-BBNhjlcY.js";import"./react-remove-scroll-Df20_Mxm.js";import"./tslib-CDuPK5Eb.js";import"./react-remove-scroll-bar-DLmkPBsp.js";import"./react-style-singleton-Cmt3ZKmQ.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-s-jgbz0b.js";import"./use-callback-ref-Dc1rmTkS.js";import"./aria-hidden-DQ5UC2Eg.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function s(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(a){if(a.ep)return;a.ep=!0;const n=s(a);fetch(a.href,n)}})();const re={code:`import sys

print("Python", sys.version)

# https://github.com/vwh/python-playground`,output:"Running Python 3.12.1",error:null,direction:"vertical",pyodide:null,isPyodideLoading:!0,isCodeExecuting:!1},x=U((t,r)=>({...re,setCode:s=>t({code:s}),setOutput:s=>t(o=>({output:o.output+`
`+s})),clearOutput:(s="")=>t({output:s}),setError:s=>t({error:s}),setDirection:s=>t({direction:s}),initializePyodide:async()=>{if(!window.loadPyodide){t({error:"Pyodide script not loaded.",isPyodideLoading:!1});return}try{const s=await window.loadPyodide();await s.loadPackage("micropip");const o=await s.pyimport("micropip");window.micropip=o,t({pyodide:s,isPyodideLoading:!1})}catch(s){console.error("Failed to load Pyodide:",s),t({error:"Failed to load Pyodide. Please refresh the page and try again.",isPyodideLoading:!1})}},runCode:async s=>{const{pyodide:o,setError:a,setOutput:n}=r();if(o){t({isCodeExecuting:!0});try{a(null);const i=[];o.globals.set("print",(...c)=>{const d=c.join(" ");i.push(d),n(i.join(`
`))}),await o.runPythonAsync(s)}catch(i){console.error(i),a(i instanceof Error?i.message:"An unknown error occurred")}finally{t({isCodeExecuting:!1})}}}})),se=t=>{if(t)try{return atob(t)}catch(r){return console.error("Failed to decode parameter:",r),null}return null},ae={theme:"system",setTheme:()=>null},P=l.createContext(ae);function oe({children:t,defaultTheme:r="system",storageKey:s="vite-ui-theme",...o}){const[a,n]=l.useState(()=>localStorage.getItem(s)||r);l.useEffect(()=>{const c=window.document.documentElement;if(c.classList.remove("light","dark"),a==="system"){const d=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";c.classList.add(d);return}c.classList.add(a)},[a]);const i={theme:a,setTheme:c=>{localStorage.setItem(s,c),n(c)}};return e.jsx(P.Provider,{...o,value:i,children:t})}const k=()=>{const t=l.useContext(P);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t};function m(...t){return A(H(t))}const b=l.forwardRef(({className:t,orientation:r="horizontal",decorative:s=!0,...o},a)=>e.jsx(C,{ref:a,decorative:s,orientation:r,className:m("shrink-0 bg-border",r==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...o}));b.displayName=C.displayName;function D({text:t}){return e.jsxs("div",{className:"flex items-center gap-1 text-foreground",children:[e.jsx(w,{className:"h-5 w-5 animate-spin"}),e.jsx("p",{children:t})]})}function ne(){const{code:t,setCode:r}=x(),{theme:s}=k(),o=l.useCallback(a=>{a&&r(a)},[r]);return e.jsxs("div",{className:"flex h-full flex-col items-center justify-center bg-background pt-4 text-foreground",children:[e.jsx(M,{defaultLanguage:"python",theme:s==="dark"?"vs-dark":"light",value:t,onChange:o,loading:e.jsx(D,{text:"Loading Editor"}),options:{minimap:{enabled:!1},scrollBeyondLastLine:!1,fontSize:14}}),e.jsx(b,{})]})}const ie=({className:t,...r})=>e.jsx(Z,{className:m("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...r}),v=_,le=({withHandle:t,className:r,...s})=>e.jsx(ee,{className:m("relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",r),...s,children:t&&e.jsx("div",{className:"z-[99] flex h-16 w-4 items-center justify-center rounded border bg-background dark:border-secondary",children:e.jsx(G,{className:"h-[12px] w-[12px] text-foreground"})})}),ce=te("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),p=l.forwardRef(({className:t,variant:r,size:s,asChild:o=!1,...a},n)=>{const i=o?B:"button";return e.jsx(i,{className:m(ce({variant:r,size:s,className:t})),ref:n,...a})});p.displayName="Button";const S=({shouldScaleBackground:t=!0,...r})=>e.jsx(u.Root,{shouldScaleBackground:t,...r});S.displayName="Drawer";const de=u.Trigger,ue=u.Portal,me=u.Close,L=l.forwardRef(({className:t,...r},s)=>e.jsx(u.Overlay,{ref:s,className:m("fixed inset-0 z-[100] bg-black/80",t),...r}));L.displayName=u.Overlay.displayName;const R=l.forwardRef(({className:t,children:r,...s},o)=>e.jsxs(ue,{children:[e.jsx(L,{}),e.jsxs(u.Content,{ref:o,className:m("fixed inset-x-0 bottom-0 z-[100] mt-24 flex h-auto flex-col rounded-t-[10px] bg-background",t),...s,children:[e.jsx("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),r]})]}));R.displayName="DrawerContent";const T=({className:t,...r})=>e.jsx("div",{className:m("grid gap-1.5 p-4 text-center sm:text-left",t),...r});T.displayName="DrawerHeader";const E=({className:t,...r})=>e.jsx("div",{className:m("mt-auto flex flex-col gap-2 p-4",t),...r});E.displayName="DrawerFooter";const z=l.forwardRef(({className:t,...r},s)=>e.jsx(u.Title,{ref:s,className:m("text-lg font-semibold leading-none tracking-tight",t),...r}));z.displayName=u.Title.displayName;const O=l.forwardRef(({className:t,...r},s)=>e.jsx(u.Description,{ref:s,className:m("text-sm text-muted-foreground",t),...r}));O.displayName=u.Description.displayName;const $=l.forwardRef(({className:t,type:r,...s},o)=>e.jsx("input",{type:r,className:m("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:o,...s}));$.displayName="Input";function fe(){const{code:t,setOutput:r,setError:s}=x(),[o,a]=l.useState(!1),n=()=>{const d=new Blob([t],{type:"text/plain"}),f=URL.createObjectURL(d),h=document.createElement("a");h.download="code.py",h.href=f,h.click(),URL.revokeObjectURL(f)},i=async d=>{d.preventDefault();const g=new FormData(d.currentTarget).get("lib").replace("pip install ","").trim();if(!(!window.micropip||!g)){a(!0);try{await window.micropip.install(g,!0),r(`pip install ${g} successfully installed`),s(null)}catch(y){s(`Failed to install ${g}: ${y.message}`)}finally{a(!1)}}},c=()=>{const d=new URLSearchParams(window.location.search);d.set("v",btoa(t));const f=`${window.location.origin}${window.location.pathname}?${d.toString()}${window.location.hash}`;window.history.replaceState({},document.title,f),navigator.clipboard.writeText(f)};return e.jsxs(S,{children:[e.jsx(de,{asChild:!0,children:e.jsxs(p,{title:"Toggle settings drawer",variant:"secondary",className:"flex items-center space-x-2",children:[e.jsx(V,{className:"h-5 w-5"}),e.jsx("span",{className:"hidden md:inline",children:"Settings"})]})}),e.jsx(R,{children:e.jsxs("div",{className:"mx-auto w-full max-w-md",children:[e.jsxs(T,{children:[e.jsx(z,{className:"text-foreground",children:"Settings"}),e.jsx(O,{children:"Personalize your site experience here."})]}),e.jsxs("div",{className:"flex flex-col gap-4 px-4 py-2 pb-0",children:[e.jsx(N,{title:"Download libraries",children:e.jsxs("form",{className:"flex gap-1",onSubmit:i,children:[e.jsx($,{type:"text",name:"lib",className:"text-foreground",placeholder:"pip install numpy",disabled:o}),e.jsx(p,{title:"Download library",variant:"secondary",type:"submit",disabled:o,children:o?e.jsx(q,{className:"h-5 w-5 animate-spin"}):e.jsx(j,{className:"h-5 w-5"})})]})}),e.jsxs(N,{title:"Share your code",children:[e.jsxs(p,{title:"Download the code",variant:"secondary",onClick:n,className:"flex items-center justify-center",children:[e.jsx(j,{className:"mr-2 h-5 w-5"}),e.jsx("span",{children:"Download Code"})]}),e.jsxs(p,{title:"Share the code",variant:"secondary",onClick:c,className:"flex items-center justify-center",children:[e.jsx(K,{className:"mr-2 h-5 w-5"}),e.jsx("span",{children:"Share Code"})]})]})]}),e.jsx(E,{children:e.jsx(me,{asChild:!0,children:e.jsx(p,{title:"Close the drawer",variant:"secondary",children:"Close"})})})]})})]})}function N({title:t,children:r}){return e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-muted-foreground",children:t}),e.jsx("div",{className:"flex flex-col gap-1",children:r})]})}function pe(){const{theme:t,setTheme:r}=k();return e.jsx(p,{variant:"secondary",size:"icon",onClick:()=>r(t==="dark"?"light":"dark"),"aria-label":t==="dark"?"Switch to light mode":"Switch to dark mode",title:t==="dark"?"Switch to light mode":"Switch to dark mode",className:"relative flex items-center justify-center p-2 transition-transform duration-300 hover:bg-gray-100 dark:hover:bg-gray-800",children:t==="dark"?e.jsx(W,{className:"h-[1.2rem] w-[1.2rem]"}):e.jsx(J,{className:"h-[1.2rem] w-[1.2rem]"})})}function he(){const{setDirection:t,direction:r,clearOutput:s,setError:o,runCode:a,code:n,isCodeExecuting:i}=x(),c=l.useCallback(()=>{t(r==="vertical"?"horizontal":"vertical")},[r,t]),d=l.useCallback(()=>{s("Running Python 3.12.1"),o(null)},[s,o]),f=l.useCallback(async()=>{await a(n)},[a,n]);return e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"flex justify-between gap-2 bg-background p-2",children:e.jsxs("div",{className:"flex grow items-center justify-center gap-1",children:[e.jsxs(p,{disabled:i,title:"Execute the code",onClick:f,variant:"secondary",children:[i?e.jsx(w,{className:"h-5 w-5 animate-spin"}):e.jsx(Q,{className:"h-5 w-5"}),e.jsx("span",{className:`ml-2 ${i?"opacity-80":""}`,children:"Run"})]}),e.jsxs(p,{disabled:i,title:"Clear the terminal",onClick:d,variant:"secondary",children:[e.jsx(X,{className:"h-5 w-5"}),e.jsx("span",{className:"ml-2 hidden md:inline",children:"Clear Terminal"})]}),e.jsxs(p,{title:"Change direction",variant:"secondary",onClick:c,children:[e.jsx(Y,{className:"h-5 w-5"}),e.jsx("span",{className:"ml-2 hidden md:inline",children:"Direction"})]}),e.jsx(fe,{}),e.jsx(pe,{})]})}),e.jsx(b,{})]})}function xe(){const{code:t}=x(),r=l.useMemo(()=>{const s=t.split(`
`).length,o=t.trim().split(/\s+/).length,a=t.length;return{lines:s,words:o,characters:a}},[t]);return e.jsx("section",{className:"absolute bottom-3 left-0 right-0 z-[99] flex items-center justify-center",children:e.jsx("div",{className:"rounded bg-secondary px-2 font-mono text-sm text-foreground",children:e.jsxs("span",{children:[r.lines," Lines, ",r.words," Words, ",r.characters," ","Characters"]})})})}function ge(){const{output:t,error:r,setOutput:s,isPyodideLoading:o,runCode:a}=x(),[n,i]=l.useState(""),c=l.useRef(null),d=l.useCallback(()=>{c.current&&(c.current.scrollTop=c.current.scrollHeight)},[]);l.useEffect(()=>{d()},[t,d]);const f=l.useCallback(async h=>{h.preventDefault();const y=new FormData(h.currentTarget).get("terminalCode");y.trim()&&(s(y),await a(y),i(""))},[a,s]);return o?e.jsx("div",{className:"p-4",children:e.jsx(D,{text:"Downloading Python"})}):e.jsx("pre",{ref:c,className:"h-full w-full overflow-x-auto bg-background p-4",children:e.jsxs("code",{className:`w-full font-mono text-sm ${r?"text-red-500":"text-foreground"}`,children:[r||t,e.jsx("br",{}),e.jsxs("form",{className:"flex items-center gap-1",onSubmit:f,children:[e.jsx("p",{children:">>"}),e.jsx("input",{value:n,name:"terminalCode",onChange:h=>i(h.target.value),className:"w-full border-none bg-transparent text-foreground outline-none",autoComplete:"off",placeholder:"..."})]})]})})}function ye(){const{direction:t,setCode:r,initializePyodide:s,isPyodideLoading:o}=x();return l.useEffect(()=>{s()},[s]),l.useEffect(()=>{const n=new URLSearchParams(window.location.search).get("v");if(n){const i=se(n);i&&r(i)}},[r]),e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:`absolute z-[999] flex h-screen w-full flex-col items-center justify-center gap-3 bg-background text-foreground ${o?"":"hidden"}`,children:[e.jsx(w,{className:"h-32 w-32 animate-spin"}),e.jsx("h1",{className:"font-bold",children:"Loading Python Playground"})]}),e.jsxs("main",{className:"flex h-screen flex-col bg-background text-foreground",children:[e.jsx(he,{}),e.jsxs(ie,{direction:t,children:[e.jsx(v,{defaultSize:65,children:e.jsx(ne,{})}),e.jsx(le,{withHandle:!0}),e.jsx(v,{defaultSize:35,children:e.jsx(ge,{})})]}),!o&&e.jsx(xe,{})]})]})}I.createRoot(document.getElementById("root")).render(e.jsx(F.StrictMode,{children:e.jsx(oe,{defaultTheme:"dark",storageKey:"theme",children:e.jsx(ye,{})})}));
