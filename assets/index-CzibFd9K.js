import{r as i,j as e,R as $}from"./react-BMrMXMSG.js";import{c as F}from"./react-dom-XhyPzpGK.js";import{c as U}from"./zustand-3uy3gfa1.js";import{F as M}from"./@monaco-editor-BrJCHBAK.js";import{c as N,S as B}from"./@radix-ui-8SGmtYo-.js";import{c as H}from"./clsx-B-dksMZM.js";import{t as A}from"./tailwind-merge-BkWO730n.js";import{L as C,G,S as V,a as q,D as j,U as K,b as W,M as J,P as Q,T as X,R as Y}from"./lucide-react-BecA__wb.js";import{P as Z,a as _,b as ee}from"./react-resizable-panels-CUcdorkG.js";import{c as te}from"./class-variance-authority-Bb4qSo10.js";import{D as u}from"./vaul-BusDX9t-.js";import"./scheduler-CzFDRTuY.js";import"./use-sync-external-store-CIXbO2Kd.js";import"./state-local-BBNhjlcY.js";import"./react-remove-scroll-Df20_Mxm.js";import"./tslib-CDuPK5Eb.js";import"./react-remove-scroll-bar-DLmkPBsp.js";import"./react-style-singleton-Cmt3ZKmQ.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-s-jgbz0b.js";import"./use-callback-ref-Dc1rmTkS.js";import"./aria-hidden-DQ5UC2Eg.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();const g=U((t,s)=>({code:`import sys

print("Python", sys.version)

# https://github.com/vwh/python-playground`,output:"Running Python 3.12.1",error:null,direction:"vertical",pyodide:null,loading:!0,setCode:r=>t({code:r}),setOutput:r=>t(n=>({output:n.output+`
`+r})),clearOutput:r=>t({output:r||""}),setError:r=>t({error:r}),setDirection:r=>t({direction:r}),initializePyodide:async()=>{if(!window.loadPyodide){t({error:"Pyodide script not loaded.",loading:!1});return}try{const r=await window.loadPyodide();await r.loadPackage("micropip");const n=await r.pyimport("micropip");window.micropip=n,t({pyodide:r,loading:!1})}catch(r){console.error("Failed to load Pyodide:",r),t({error:"Failed to load Pyodide. Please refresh the page and try again.",loading:!1})}},runCode:async r=>{const{pyodide:n,setError:a,setOutput:o}=s();if(n)try{a(null);const l=[];n.globals.set("print",(...c)=>{const d=c.join(" ");l.push(d),o(l.join(`
`))}),await n.runPythonAsync(r)}catch(l){console.error(l),l instanceof Error?a(l.message):a("An unknown error occurred")}}})),re=t=>{if(t)try{return atob(t)}catch(s){return console.error("Failed to decode parameter:",s),null}return null},se={theme:"system",setTheme:()=>null},k=i.createContext(se);function ae({children:t,defaultTheme:s="system",storageKey:r="vite-ui-theme",...n}){const[a,o]=i.useState(()=>localStorage.getItem(r)||s);i.useEffect(()=>{const c=window.document.documentElement;if(c.classList.remove("light","dark"),a==="system"){const d=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";c.classList.add(d);return}c.classList.add(a)},[a]);const l={theme:a,setTheme:c=>{localStorage.setItem(r,c),o(c)}};return e.jsx(k.Provider,{...n,value:l,children:t})}const P=()=>{const t=i.useContext(k);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t};function m(...t){return A(H(t))}const b=i.forwardRef(({className:t,orientation:s="horizontal",decorative:r=!0,...n},a)=>e.jsx(N,{ref:a,decorative:r,orientation:s,className:m("shrink-0 bg-border",s==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...n}));b.displayName=N.displayName;function S({text:t}){return e.jsxs("div",{className:"flex items-center gap-1 text-foreground",children:[e.jsx(C,{className:"h-5 w-5 animate-spin"}),e.jsx("p",{children:t})]})}function ne(){const{code:t,setCode:s}=g(),{theme:r}=P(),n=i.useCallback(a=>{a&&s(a)},[s]);return e.jsxs("div",{className:"flex h-full flex-col items-center justify-center bg-background pt-4 text-foreground",children:[e.jsx(M,{defaultLanguage:"python",theme:r==="dark"?"vs-dark":"light",value:t,onChange:n,loading:e.jsx(S,{text:"Loading Editor"}),options:{minimap:{enabled:!1},scrollBeyondLastLine:!1,fontSize:14}}),e.jsx(b,{})]})}const oe=({className:t,...s})=>e.jsx(Z,{className:m("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...s}),v=_,ie=({withHandle:t,className:s,...r})=>e.jsx(ee,{className:m("relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",s),...r,children:t&&e.jsx("div",{className:"z-[99] flex h-16 w-4 items-center justify-center rounded border bg-background dark:border-secondary",children:e.jsx(G,{className:"h-[12px] w-[12px] text-foreground"})})}),le=te("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),f=i.forwardRef(({className:t,variant:s,size:r,asChild:n=!1,...a},o)=>{const l=n?B:"button";return e.jsx(l,{className:m(le({variant:s,size:r,className:t})),ref:o,...a})});f.displayName="Button";const D=({shouldScaleBackground:t=!0,...s})=>e.jsx(u.Root,{shouldScaleBackground:t,...s});D.displayName="Drawer";const ce=u.Trigger,de=u.Portal,ue=u.Close,R=i.forwardRef(({className:t,...s},r)=>e.jsx(u.Overlay,{ref:r,className:m("fixed inset-0 z-[100] bg-black/80",t),...s}));R.displayName=u.Overlay.displayName;const T=i.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(de,{children:[e.jsx(R,{}),e.jsxs(u.Content,{ref:n,className:m("fixed inset-x-0 bottom-0 z-[100] mt-24 flex h-auto flex-col rounded-t-[10px] bg-background",t),...r,children:[e.jsx("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),s]})]}));T.displayName="DrawerContent";const L=({className:t,...s})=>e.jsx("div",{className:m("grid gap-1.5 p-4 text-center sm:text-left",t),...s});L.displayName="DrawerHeader";const z=({className:t,...s})=>e.jsx("div",{className:m("mt-auto flex flex-col gap-2 p-4",t),...s});z.displayName="DrawerFooter";const E=i.forwardRef(({className:t,...s},r)=>e.jsx(u.Title,{ref:r,className:m("text-lg font-semibold leading-none tracking-tight",t),...s}));E.displayName=u.Title.displayName;const O=i.forwardRef(({className:t,...s},r)=>e.jsx(u.Description,{ref:r,className:m("text-sm text-muted-foreground",t),...s}));O.displayName=u.Description.displayName;const I=i.forwardRef(({className:t,type:s,...r},n)=>e.jsx("input",{type:s,className:m("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...r}));I.displayName="Input";function me(){const{code:t,setOutput:s,setError:r}=g(),[n,a]=i.useState(!1),o=()=>{const d=new Blob([t],{type:"text/plain"}),h=URL.createObjectURL(d),x=document.createElement("a");x.download="code.py",x.href=h,x.click(),URL.revokeObjectURL(h)},l=async d=>{d.preventDefault();const p=d.currentTarget.elements.namedItem("lib").value.replace("pip install ","").trim();if(!(!window.micropip||!p)){a(!0);try{await window.micropip.install(p,!0),s(`pip install ${p} successfully installed`),r(null)}catch(y){r(`Failed to install ${p}: ${y.message}`)}finally{a(!1)}}},c=()=>{const d=new URLSearchParams(window.location.search);d.set("v",btoa(t));const h=`${window.location.origin}${window.location.pathname}?${d.toString()}${window.location.hash}`;window.history.replaceState({},document.title,h),navigator.clipboard.writeText(h)};return e.jsxs(D,{children:[e.jsx(ce,{asChild:!0,children:e.jsxs(f,{title:"Toggle settings drawer",variant:"secondary",className:"flex items-center space-x-2",children:[e.jsx(V,{className:"h-5 w-5"}),e.jsx("span",{className:"hidden md:inline",children:"Settings"})]})}),e.jsx(T,{children:e.jsxs("div",{className:"mx-auto w-full max-w-md",children:[e.jsxs(L,{children:[e.jsx(E,{className:"text-foreground",children:"Settings"}),e.jsx(O,{children:"Personalize your site experience here."})]}),e.jsxs("div",{className:"flex flex-col gap-4 px-4 py-2 pb-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-muted-foreground",children:"Download libraries"}),e.jsxs("form",{className:"flex gap-1",onSubmit:l,children:[e.jsx(I,{type:"text",name:"lib",className:"text-foreground",placeholder:"pip install numpy",disabled:n}),e.jsx(f,{title:"Download library",variant:"secondary",type:"submit",disabled:n,children:n?e.jsx(q,{className:"h-5 w-5 animate-spin"}):e.jsx(j,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-foreground",children:"Share your code"}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs(f,{title:"Download the code",variant:"secondary",onClick:o,className:"flex items-center justify-center",children:[e.jsx(j,{className:"mr-2 h-5 w-5"}),e.jsx("span",{children:"Download Code"})]}),e.jsxs(f,{title:"Share the code",variant:"secondary",onClick:c,className:"flex items-center justify-center",children:[e.jsx(K,{className:"mr-2 h-5 w-5"}),e.jsx("span",{children:"Share Code"})]})]})]})]}),e.jsx(z,{children:e.jsx(ue,{asChild:!0,children:e.jsx(f,{title:"Close the drawer",variant:"secondary",children:"Close"})})})]})})]})}function fe(){const{theme:t,setTheme:s}=P();return e.jsx(f,{variant:"secondary",size:"icon",onClick:()=>s(t==="dark"?"light":"dark"),"aria-label":t==="dark"?"Switch to light mode":"Switch to dark mode",title:t==="dark"?"Switch to light mode":"Switch to dark mode",className:"relative flex items-center justify-center p-2 transition-transform duration-300 hover:bg-gray-100 dark:hover:bg-gray-800",children:t==="dark"?e.jsx(W,{className:"h-[1.2rem] w-[1.2rem]"}):e.jsx(J,{className:"h-[1.2rem] w-[1.2rem]"})})}function pe(){const{setDirection:t,direction:s,clearOutput:r,setError:n,runCode:a,code:o}=g(),l=i.useCallback(()=>{t(s==="vertical"?"horizontal":"vertical")},[s,t]),c=i.useCallback(()=>{r("Running Python 3.12.1"),n(null)},[r,n]),d=i.useCallback(async()=>{await a(o)},[a,o]);return e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"flex justify-between gap-2 bg-background p-2",children:e.jsxs("div",{className:"flex grow items-center justify-center gap-1",children:[e.jsxs(f,{title:"Execute the code",onClick:d,variant:"secondary",children:[e.jsx(Q,{className:"h-5 w-5"}),e.jsx("span",{className:"ml-2",children:"Run"})]}),e.jsxs(f,{title:"Clear the terminal",onClick:c,variant:"secondary",children:[e.jsx(X,{className:"h-5 w-5"}),e.jsx("span",{className:"ml-2 hidden md:inline",children:"Clear Terminal"})]}),e.jsxs(f,{title:"Change direction",variant:"secondary",onClick:l,children:[e.jsx(Y,{className:"h-5 w-5"}),e.jsx("span",{className:"ml-2 hidden md:inline",children:"Direction"})]}),e.jsx(me,{}),e.jsx(fe,{})]})}),e.jsx(b,{})]})}function he(){const{code:t}=g(),s=i.useMemo(()=>{const r=t.split(`
`).length,n=t.trim().split(/\s+/).length,a=t.length;return{lines:r,words:n,characters:a}},[t]);return e.jsx("section",{className:"absolute bottom-3 left-0 right-0 z-[99] flex items-center justify-center",children:e.jsx("div",{className:"rounded bg-secondary px-2 font-mono text-sm text-foreground",children:e.jsxs("span",{children:[s.lines," Lines, ",s.words," Words, ",s.characters," ","Characters"]})})})}function xe({handleRunCode:t,loading:s}){const{output:r,error:n,setOutput:a}=g(),[o,l]=i.useState(""),c=i.useRef(null),d=i.useCallback(()=>{c.current&&(c.current.scrollTop=c.current.scrollHeight)},[]);i.useEffect(()=>{d()},[r,d]);const h=i.useCallback(async p=>{p.preventDefault();const w=p.currentTarget.elements.namedItem("terminalCode").value.trim();w&&(a(w),await t(w),l(""))},[t,a]),x=i.useCallback(p=>{l(p.target.value)},[]);return s?e.jsx("div",{className:"p-4",children:e.jsx(S,{text:"Downloading Python"})}):e.jsx("pre",{ref:c,className:"h-full w-full overflow-x-auto bg-background p-4",children:e.jsxs("code",{className:`w-full font-mono text-sm ${n?"text-red-500":"text-foreground"}`,children:[n||r,e.jsx("br",{}),e.jsxs("form",{className:"flex items-center gap-1",onSubmit:h,children:[e.jsx("p",{children:">>"}),e.jsx("input",{value:o,name:"terminalCode",onChange:x,className:"w-full border-none bg-transparent text-foreground outline-none",autoComplete:"off",placeholder:"..."})]})]})})}function ge(){const{direction:t,setCode:s,runCode:r,initializePyodide:n,loading:a}=g();return i.useEffect(()=>{n()},[n]),i.useEffect(()=>{const l=new URLSearchParams(window.location.search).get("v");if(l){const c=re(l);c&&s(c)}},[s]),e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:`absolute z-[999] flex h-screen w-full flex-col items-center justify-center gap-3 bg-background text-foreground ${a?"":"hidden"}`,children:[e.jsx(C,{className:"h-32 w-32 animate-spin"}),e.jsx("h1",{className:"font-bold",children:"Loading Python Playground"})]}),e.jsxs("main",{className:"flex h-screen flex-col bg-background text-foreground",children:[e.jsx(pe,{}),e.jsxs(oe,{direction:t,children:[e.jsx(v,{defaultSize:65,children:e.jsx(ne,{})}),e.jsx(ie,{withHandle:!0}),e.jsx(v,{defaultSize:35,children:e.jsx(xe,{handleRunCode:r,loading:a})})]}),!a&&e.jsx(he,{})]})]})}F.createRoot(document.getElementById("root")).render(e.jsx($.StrictMode,{children:e.jsx(ae,{defaultTheme:"dark",storageKey:"theme",children:e.jsx(ge,{})})}));
